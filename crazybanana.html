<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banana Factory Empire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23654321" width="100" height="100"/><rect fill="%23543b1a" x="0" y="0" width="20" height="100"/><rect fill="%23543b1a" x="40" y="0" width="20" height="100"/><rect fill="%23543b1a" x="80" y="0" width="20" height="100"/><rect fill="%234a331a" x="0" y="0" width="100" height="10"/><rect fill="%234a331a" x="0" y="30" width="100" height="10"/><rect fill="%234a331a" x="0" y="60" width="100" height="10"/><rect fill="%234a331a" x="0" y="90" width="100" height="10"/><circle fill="%23ffeb3b" cx="10" cy="20" r="2"/><circle fill="%23ffeb3b" cx="30" cy="50" r="2"/><circle fill="%23ffeb3b" cx="70" cy="75" r="2"/><circle fill="%23ffeb3b" cx="90" cy="25" r="2"/></svg>');
            background-size: 200px 200px;
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        .game-header {
            text-align: center;
            padding: 20px 0;
            background: rgba(0,0,0,0.8);
            border-bottom: 2px solid #ffeb3b;
        }

        h1 {
            font-size: 3.5em;
            color: #ffeb3b;
            text-shadow: 0 0 20px rgba(255,235,59,0.5);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2em;
            color: #ffd54f;
            opacity: 0.9;
        }

        .game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: calc(100vh - 140px);
        }

        .main-area {
            background: rgba(0,0,0,0.85);
            border: 2px solid #ffeb3b;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 0 30px rgba(255,235,59,0.3);
            backdrop-filter: blur(10px);
        }

        .score {
            font-size: 3em;
            color: #ffeb3b;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(255,235,59,0.7);
            font-weight: 700;
        }

        .banana-button {
            width: 220px;
            height: 220px;
            background: radial-gradient(circle at 30% 30%, #fff176, #ffeb3b, #ffc107);
            border: 4px solid #ff8f00;
            border-radius: 20px;
            font-size: 6em;
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 10px 30px rgba(255,193,7,0.4), inset 0 0 20px rgba(255,255,255,0.3);
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .banana-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .banana-button:hover::before {
            animation: shine 0.5s ease;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) rotate(45deg); opacity: 0; }
        }

        .banana-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 40px rgba(255,193,7,0.6), inset 0 0 25px rgba(255,255,255,0.4);
        }

        .banana-button:active {
            transform: translateY(-1px) scale(0.98);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(255,235,59,0.1);
            border: 1px solid #ffeb3b;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(5px);
        }

        .stat-label {
            color: #ffd54f;
            font-size: 0.9em;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .stat-value {
            color: #ffeb3b;
            font-size: 1.6em;
            font-weight: 700;
            text-shadow: 0 0 10px rgba(255,235,59,0.5);
        }

        .shop-button {
            background: linear-gradient(135deg, #ffeb3b, #ffc107);
            border: 2px solid #ff8f00;
            border-radius: 12px;
            color: #000;
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(255,235,59,0.4);
            margin: 10px;
            display: inline-block;
        }

        .shop-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255,235,59,0.6);
            background: linear-gradient(135deg, #fff176, #ffeb3b);
        }

        .shop-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .shop-overlay.active {
            display: flex;
            opacity: 1;
            align-items: center;
            justify-content: center;
        }

        .shop-modal {
            background: rgba(0,0,0,0.95);
            border: 3px solid #ffeb3b;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(255,235,59,0.5);
            backdrop-filter: blur(15px);
            transform: scale(0.8);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .shop-overlay.active .shop-modal {
            transform: scale(1);
        }

        .shop-header {
            background: linear-gradient(135deg, #ffeb3b, #ffc107);
            color: #000;
            padding: 20px;
            text-align: center;
            font-size: 1.8em;
            font-weight: 700;
            text-shadow: none;
            position: relative;
            flex-shrink: 0;
        }

        .close-button {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: #000;
            font-size: 2em;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s ease;
        }

        .close-button:hover {
            transform: scale(1.2);
        }

        .upgrades-list {
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 20px;
            scrollbar-width: thin;
            scrollbar-color: #ffeb3b rgba(255,235,59,0.1);
        }

        .upgrades-list::-webkit-scrollbar {
            width: 12px;
        }

        .upgrades-list::-webkit-scrollbar-track {
            background: rgba(255,235,59,0.1);
            border-radius: 6px;
        }

        .upgrades-list::-webkit-scrollbar-thumb {
            background: #ffeb3b;
            border-radius: 6px;
            border: 2px solid rgba(0,0,0,0.2);
        }

        .upgrades-list::-webkit-scrollbar-thumb:hover {
            background: #fff176;
        }

        .upgrade-category {
            margin-bottom: 25px;
        }

        .category-header {
            color: #ffeb3b;
            font-size: 1.3em;
            font-weight: 600;
            padding: 15px 20px;
            background: rgba(255,235,59,0.15);
            border-left: 4px solid #ffeb3b;
            border-radius: 8px;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(255,235,59,0.2);
        }

        .upgrade-item {
            background: rgba(255,235,59,0.05);
            border: 1px solid #444;
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .upgrade-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,235,59,0.2), transparent);
            transition: left 0.5s ease;
        }

        .upgrade-item.purchased::before {
            left: 100%;
        }

        .upgrade-content {
            display: grid;
            grid-template-columns: 1fr auto;
            padding: 20px;
            align-items: center;
            gap: 20px;
        }

        .upgrade-info {
            flex-grow: 1;
        }

        .upgrade-name {
            color: #fff;
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .upgrade-description {
            color: #ccc;
            font-size: 0.9em;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .upgrade-stats {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 0.85em;
        }

        .upgrade-cost {
            color: #ffeb3b;
            font-weight: 600;
        }

        .upgrade-owned {
            color: #4caf50;
            font-weight: 600;
        }

        .upgrade-effect {
            color: #ff9800;
            font-weight: 600;
        }

        .buy-button {
            background: linear-gradient(135deg, #4caf50, #45a049);
            border: none;
            border-radius: 8px;
            color: white;
            padding: 12px 24px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 0.85em;
            letter-spacing: 0.5px;
            min-width: 90px;
            box-shadow: 0 4px 15px rgba(76,175,80,0.3);
        }

        .buy-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #5cbf60, #4caf50);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76,175,80,0.5);
        }

        .buy-button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .upgrade-item.affordable {
            border-color: #4caf50;
            background: rgba(76,175,80,0.1);
            box-shadow: 0 4px 15px rgba(76,175,80,0.2);
        }

        .click-effect {
            position: absolute;
            color: #ffeb3b;
            font-weight: 700;
            font-size: 1.8em;
            pointer-events: none;
            text-shadow: 0 0 10px rgba(255,235,59,0.8);
            animation: floatUp 1.2s ease-out forwards;
            z-index: 1000;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(1.3);
            }
        }

        .purchase-effect {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            padding: 20px 40px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.2em;
            box-shadow: 0 10px 30px rgba(76,175,80,0.5);
            z-index: 10000;
            animation: purchasePop 1s ease-out forwards;
        }

        @keyframes purchasePop {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            30% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.9);
            }
        }

        .achievement-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: 600;
            box-shadow: 0 6px 20px rgba(255,152,0,0.4);
            z-index: 10001;
            animation: achievementPop 3s ease-out forwards;
            max-width: 300px;
        }

        @keyframes achievementPop {
            0%, 10% {
                opacity: 0;
                transform: translateX(100%);
            }
            20%, 80% {
                opacity: 1;
                transform: translateX(0);
            }
            100% {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        .prestige-button {
            background: linear-gradient(135deg, #9c27b0, #7b1fa2);
            border: 2px solid #6a1b9a;
            border-radius: 12px;
            color: white;
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 6px 20px rgba(156,39,176,0.4);
            margin: 10px;
            display: inline-block;
        }

        .prestige-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(156,39,176,0.6);
            background: linear-gradient(135deg, #ab47bc, #9c27b0);
        }

        .prestige-button:disabled {
            background: #555;
            border-color: #444;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .multiplier-display {
            background: rgba(156,39,176,0.2);
            border: 1px solid #9c27b0;
            border-radius: 8px;
            padding: 10px 15px;
            margin: 10px 0;
            text-align: center;
            font-weight: 600;
            color: #e1bee7;
        }

        .save-load-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .save-button, .load-button, .reset-button {
            background: linear-gradient(135deg, #607d8b, #546e7a);
            border: 2px solid #455a64;
            border-radius: 8px;
            color: white;
            padding: 10px 20px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .save-button:hover, .load-button:hover {
            background: linear-gradient(135deg, #78909c, #607d8b);
            transform: translateY(-2px);
        }

        .reset-button {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            border-color: #c62828;
        }

        .reset-button:hover {
            background: linear-gradient(135deg, #ef5350, #f44336);
            transform: translateY(-2px);
        }

        @media (max-width: 1024px) {
            h1 {
                font-size: 2.5em;
            }
            
            .banana-button {
                width: 180px;
                height: 180px;
                font-size: 5em;
            }

            .shop-modal {
                width: 95%;
                max-height: 90vh;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .upgrade-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="game-header">
        <h1>üè≠ BANANA FACTORY EMPIRE üçå</h1>
        <div class="subtitle">Build Your Industrial Banana Empire</div>
    </div>
    
    <div class="game-container">
        <div class="main-area">
            <div class="score" id="score">0 bananas</div>
            
            <div class="multiplier-display" id="multiplierDisplay" style="display: none;">
                Golden Banana Multiplier: x<span id="multiplierValue">1</span>
            </div>
            
            <button class="banana-button" id="bananaBtn">üçå</button>
            
            <div class="save-load-buttons">
                <button class="shop-button" id="shopBtn">üè™ Factory Shop</button>
                <button class="prestige-button" id="prestigeBtn" disabled>‚≠ê Prestige (Req: 1M bananas)</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Per Click</div>
                    <div class="stat-value" id="clickPower">1</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Per Second</div>
                    <div class="stat-value" id="bps">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Upgrades Owned</div>
                    <div class="stat-value" id="upgradesOwned">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Clicks</div>
                    <div class="stat-value" id="totalClicks">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Golden Bananas</div>
                    <div class="stat-value" id="goldenBananas">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Achievements</div>
                    <div class="stat-value" id="achievementCount">0</div>
                </div>
            </div>

            <div class="save-load-buttons">
                <button class="save-button" id="saveBtn">üíæ Manual Save</button>
                <button class="load-button" id="loadBtn">üìÅ Load Save</button>
                <button class="reset-button" id="resetBtn">üóëÔ∏è Reset Game</button>
            </div>
        </div>
    </div>

    <!-- Shop Overlay -->
    <div class="shop-overlay" id="shopOverlay">
        <div class="shop-modal">
            <div class="shop-header">
                üè≠ FACTORY UPGRADES
                <button class="close-button" id="closeShop">&times;</button>
            </div>
            <div class="upgrades-list" id="shopContent"></div>
        </div>
    </div>

    <script>
        let gameState = {
            bananas: 0,
            clickPower: 1,
            bananasPerSecond: 0,
            totalClicks: 0,
            upgradesOwned: 0,
            goldenBananas: 0,
            prestigeMultiplier: 1,
            achievements: {},
            upgrades: {},
            multiplierActive: false,
            multiplierEnd: 0,
            statistics: {
                totalBananasEarned: 0,
                totalMoneySpent: 0,
                timePlayed: 0,
                prestigeCount: 0
            }
        };

        const upgradeCategories = {
            clicking: {
                name: "üñ±Ô∏è Clicking Power",
                upgrades: {
                    basicGrip: { cost: 15, effect: 1, type: 'click', name: 'Better Grip', desc: 'Stronger hands for better clicking' },
                    steelFingers: { cost: 100, effect: 2, type: 'click', name: 'Steel Fingers', desc: 'Reinforced fingers for power clicking' },
                    powerGloves: { cost: 500, effect: 5, type: 'click', name: 'Power Gloves', desc: 'High-tech gloves multiply your click power' },
                    cyborgHands: { cost: 2500, effect: 10, type: 'click', name: 'Cyborg Hands', desc: 'Mechanical hands with hydraulic power' },
                    titaniumClaws: { cost: 12000, effect: 25, type: 'click', name: 'Titanium Claws', desc: 'Sharp titanium claws for maximum clicking' },
                    atomicFingers: { cost: 60000, effect: 50, type: 'click', name: 'Atomic Fingers', desc: 'Nuclear-powered clicking appendages' },
                    quantumHands: { cost: 300000, effect: 100, type: 'click', name: 'Quantum Hands', desc: 'Hands that exist in multiple dimensions' },
                    godMode: { cost: 1500000, effect: 250, type: 'click', name: 'God Mode', desc: 'Transcend mortal clicking limitations' },
                    infiniteTouch: { cost: 7500000, effect: 500, type: 'click', name: 'Infinite Touch', desc: 'Touch bananas across space and time' },
                    realityBreaker: { cost: 37500000, effect: 1000, type: 'click', name: 'Reality Breaker', desc: 'Break the laws of physics with clicks' },
                    cosmicClicker: { cost: 187500000, effect: 2500, type: 'click', name: 'Cosmic Clicker', desc: 'Click with the power of galaxies' },
                    omnipresence: { cost: 937500000, effect: 6000, type: 'click', name: 'Omnipresence', desc: 'Click everywhere at once' }
                }
            },
            workers: {
                name: "üë• Factory Workers",
                upgrades: {
                    intern: { cost: 100, effect: 1, type: 'auto', name: 'Unpaid Intern', desc: 'Desperate college student clicks for experience' },
                    employee: { cost: 500, effect: 3, type: 'auto', name: 'Part-time Worker', desc: 'Minimum wage, maximum banana dedication' },
                    supervisor: { cost: 2500, effect: 8, type: 'auto', name: 'Shift Supervisor', desc: 'Manages other workers while clicking' },
                    manager: { cost: 12000, effect: 20, type: 'auto', name: 'Department Manager', desc: 'Professional banana management expertise' },
                    executive: { cost: 60000, effect: 50, type: 'auto', name: 'Corporate Executive', desc: 'High-level strategic banana operations' },
                    ceo: { cost: 300000, effect: 125, type: 'auto', name: 'Banana CEO', desc: 'Leads the entire banana corporation' },
                    overlord: { cost: 1500000, effect: 300, type: 'auto', name: 'Banana Overlord', desc: 'Rules over all banana territories' },
                    emperor: { cost: 7500000, effect: 750, type: 'auto', name: 'Banana Emperor', desc: 'Commands vast banana empires' },
                    deity: { cost: 37500000, effect: 1800, type: 'auto', name: 'Banana Deity', desc: 'Worshipped by banana civilizations' },
                    transcendent: { cost: 187500000, effect: 4500, type: 'auto', name: 'Transcendent Being', desc: 'Beyond mortal banana comprehension' },
                    architect: { cost: 937500000, effect: 11000, type: 'auto', name: 'Reality Architect', desc: 'Designs the very fabric of banana existence' }
                }
            },
            machines: {
                name: "‚öôÔ∏è Factory Machines",
                upgrades: {
                    handCrank: { cost: 250, effect: 2, type: 'auto', name: 'Hand Crank Machine', desc: 'Manual banana processing device' },
                    steamEngine: { cost: 1250, effect: 6, type: 'auto', name: 'Steam-Powered Press', desc: 'Industrial revolution banana technology' },
                    electricMotor: { cost: 6250, effect: 15, type: 'auto', name: 'Electric Processor', desc: 'Automated electrical banana production' },
                    assembly: { cost: 31000, effect: 40, type: 'auto', name: 'Assembly Line', desc: 'Mass production banana manufacturing' },
                    robotics: { cost: 155000, effect: 100, type: 'auto', name: 'Robotic Factory', desc: 'AI-controlled banana production facility' },
                    quantum: { cost: 775000, effect: 250, type: 'auto', name: 'Quantum Processor', desc: 'Quantum mechanics banana manipulation' },
                    fusion: { cost: 3875000, effect: 625, type: 'auto', name: 'Fusion Reactor', desc: 'Nuclear fusion powers banana creation' },
                    antimatter: { cost: 19375000, effect: 1500, type: 'auto', name: 'Antimatter Engine', desc: 'Harness antimatter for banana energy' },
                    blackhole: { cost: 96875000, effect: 3750, type: 'auto', name: 'Black Hole Generator', desc: 'Bend spacetime to create bananas' },
                    universe: { cost: 484375000, effect: 9000, type: 'auto', name: 'Universe Fabricator', desc: 'Create entire universes of bananas' },
                    multiverse: { cost: 2421875000, effect: 22500, type: 'auto', name: 'Multiverse Engine', desc: 'Harvest bananas from infinite realities' }
                }
            },
            facilities: {
                name: "üè≠ Production Facilities",
                upgrades: {
                    shed: { cost: 500, effect: 3, type: 'auto', name: 'Garden Shed', desc: 'Small backyard banana operation' },
                    greenhouse: { cost: 2500, effect: 8, type: 'auto', name: 'Commercial Greenhouse', desc: 'Climate-controlled banana growing' },
                    warehouse: { cost: 12500, effect: 20, type: 'auto', name: 'Storage Warehouse', desc: 'Mass banana storage and processing' },
                    factory: { cost: 62500, effect: 50, type: 'auto', name: 'Industrial Factory', desc: 'Large-scale banana manufacturing' },
                    complex: { cost: 312500, effect: 125, type: 'auto', name: 'Factory Complex', desc: 'Multiple interconnected facilities' },
                    campus: { cost: 1562500, effect: 300, type: 'auto', name: 'Corporate Campus', desc: 'Massive banana production campus' },
                    megafactory: { cost: 7812500, effect: 750, type: 'auto', name: 'Mega Factory', desc: 'City-sized banana production facility' },
                    arcology: { cost: 39062500, effect: 1875, type: 'auto', name: 'Banana Arcology', desc: 'Self-contained banana ecosystem' },
                    orbital: { cost: 195312500, effect: 4500, type: 'auto', name: 'Orbital Platform', desc: 'Space-based banana production' },
                    dyson: { cost: 976562500, effect: 11250, type: 'auto', name: 'Dyson Sphere', desc: 'Harness entire star for banana power' },
                    galactic: { cost: 4882812500, effect: 28000, type: 'auto', name: 'Galactic Network', desc: 'Connect banana facilities across the galaxy' }
                }
            },
            research: {
                name: "üî¨ Research & Development",
                upgrades: {
                    microscope: { cost: 1000, effect: 5, type: 'auto', name: 'Laboratory', desc: 'Basic banana research facility' },
                    genetics: { cost: 5000, effect: 12, type: 'auto', name: 'Genetics Lab', desc: 'Modify banana DNA for better yields' },
                    biotech: { cost: 25000, effect: 30, type: 'auto', name: 'Biotech Division', desc: 'Advanced biological banana engineering' },
                    nanotech: { cost: 125000, effect: 75, type: 'auto', name: 'Nanotech Research', desc: 'Microscopic banana enhancement' },
                    airesearch: { cost: 625000, effect: 190, type: 'auto', name: 'AI Research Center', desc: 'Artificial intelligence banana optimization' },
                    temporal: { cost: 3125000, effect: 475, type: 'auto', name: 'Temporal Studies', desc: 'Time manipulation for instant bananas' },
                    dimensional: { cost: 15625000, effect: 1125, type: 'auto', name: 'Dimensional Lab', desc: 'Harvest bananas from parallel dimensions' },
                    consciousness: { cost: 78125000, effect: 2700, type: 'auto', name: 'Consciousness Research', desc: 'Give bananas self-awareness' },
                    omniscience: { cost: 390625000, effect: 6750, type: 'auto', name: 'Omniscience Institute', desc: 'All-knowing banana intelligence' },
                    creation: { cost: 1953125000, effect: 16200, type: 'auto', name: 'Creation Engine', desc: 'Genesis-level banana manifestation' },
                    evolution: { cost: 9765625000, effect: 40000, type: 'auto', name: 'Evolution Chamber', desc: 'Evolve bananas beyond recognition' }
                }
            },
            mystical: {
                name: "‚ú® Mystical Powers",
                upgrades: {
                    charm: { cost: 2000, effect: 4, type: 'auto', name: 'Lucky Charm', desc: 'Mysterious banana-attracting trinket' },
                    ritual: { cost: 10000, effect: 10, type: 'auto', name: 'Ancient Ritual', desc: 'Summon bananas through dark magic' },
                    talisman: { cost: 50000, effect: 25, type: 'auto', name: 'Golden Talisman', desc: 'Enchanted artifact of banana power' },
                    portal: { cost: 250000, effect: 60, type: 'auto', name: 'Banana Portal', desc: 'Interdimensional banana transportation' },
                    altar: { cost: 1250000, effect: 150, type: 'auto', name: 'Sacred Altar', desc: 'Worship site for the Banana Gods' },
                    temple: { cost: 6250000, effect: 375, type: 'auto', name: 'Banana Temple', desc: 'Holy monument to banana divinity' },
                    prophecy: { cost: 31250000, effect: 900, type: 'auto', name: 'Ancient Prophecy', desc: 'Foretells the coming of infinite bananas' },
                    apotheosis: { cost: 156250000, effect: 2250, type: 'auto', name: 'Banana Apotheosis', desc: 'Transform into a banana deity' },
                    omnipotence: { cost: 781250000, effect: 5400, type: 'auto', name: 'Banana Omnipotence', desc: 'Unlimited cosmic banana power' },
                    singularity: { cost: 3906250000, effect: 13500, type: 'auto', name: 'Banana Singularity', desc: 'The universe becomes one giant banana' },
                    transcendence: { cost: 19531250000, effect: 33750, type: 'auto', name: 'Ultimate Transcendence', desc: 'Beyond the concept of bananas themselves' }
                }
            },
            automation: {
                name: "ü§ñ Automation Systems",
                upgrades: {
                    autoClicker: { cost: 1500, effect: 4, type: 'auto', name: 'Auto-Clicker', desc: 'Simple mechanical clicking device' },
                    smartClicker: { cost: 7500, effect: 12, type: 'auto', name: 'Smart Clicker', desc: 'AI-powered clicking optimization' },
                    clickFarm: { cost: 37500, effect: 30, type: 'auto', name: 'Click Farm', desc: 'Array of synchronized auto-clickers' },
                    neuralNetwork: { cost: 187500, effect: 75, type: 'auto', name: 'Neural Network', desc: 'Self-learning clicking patterns' },
                    quantumClicker: { cost: 937500, effect: 190, type: 'auto', name: 'Quantum Clicker', desc: 'Clicks in multiple timelines simultaneously' },
                    hiveMind: { cost: 4687500, effect: 475, type: 'auto', name: 'Hive Mind', desc: 'Collective consciousness of clicking' },
                    superintelligence: { cost: 23437500, effect: 1125, type: 'auto', name: 'Super Intelligence', desc: 'AI that has surpassed human intelligence' },
                    digitalGod: { cost: 117187500, effect: 2700, type: 'auto', name: 'Digital God', desc: 'Omnipresent AI deity of clicking' },
                    matrixControl: { cost: 585937500, effect: 6750, type: 'auto', name: 'Matrix Control', desc: 'Control the simulation itself' },
                    sourceCode: { cost: 2929687500, effect: 16200, type: 'auto', name: 'Source Code Access', desc: 'Modify reality\'s programming' },
                    systemAdmin: { cost: 14648437500, effect: 40500, type: 'auto', name: 'System Administrator', desc: 'Admin privileges over existence' }
                }
            }
        };

        // Achievements system
        const achievements = {
            firstClick: { name: "First Click", desc: "Click the banana for the first time", condition: () => gameState.totalClicks >= 1 },
            hundredClicks: { name: "Click Master", desc: "Click 100 times", condition: () => gameState.totalClicks >= 100 },
            thousandClicks: { name: "Click Legend", desc: "Click 1,000 times", condition: () => gameState.totalClicks >= 1000 },
            firstUpgrade: { name: "Getting Started", desc: "Buy your first upgrade", condition: () => gameState.upgradesOwned >= 1 },
            tenUpgrades: { name: "Expanding Empire", desc: "Own 10 upgrades", condition: () => gameState.upgradesOwned >= 10 },
            hundredBananas: { name: "Banana Collector", desc: "Earn 100 bananas", condition: () => gameState.statistics.totalBananasEarned >= 100 },
            thousandBananas: { name: "Banana Hoarder", desc: "Earn 1,000 bananas", condition: () => gameState.statistics.totalBananasEarned >= 1000 },
            millionBananas: { name: "Banana Millionaire", desc: "Earn 1,000,000 bananas", condition: () => gameState.statistics.totalBananasEarned >= 1000000 },
            billionBananas: { name: "Banana Billionaire", desc: "Earn 1,000,000,000 bananas", condition: () => gameState.statistics.totalBananasEarned >= 1000000000 },
            firstPrestige: { name: "Golden Ascension", desc: "Prestige for the first time", condition: () => gameState.statistics.prestigeCount >= 1 },
            autoProducer: { name: "Passive Income", desc: "Reach 100 bananas per second", condition: () => gameState.bananasPerSecond >= 100 },
            fastClicker: { name: "Speed Demon", desc: "Reach 1,000 click power", condition: () => gameState.clickPower >= 1000 },
            goldenBananaCollector: { name: "Golden Touch", desc: "Collect 10 Golden Bananas", condition: () => gameState.goldenBananas >= 10 }
        };

        // Initialize all upgrades and achievements
        for (let categoryKey in upgradeCategories) {
            for (let upgradeKey in upgradeCategories[categoryKey].upgrades) {
                if (!gameState.upgrades[upgradeKey]) {
                    gameState.upgrades[upgradeKey] = { 
                        owned: 0, 
                        cost: upgradeCategories[categoryKey].upgrades[upgradeKey].cost 
                    };
                }
            }
        }

        for (let achievementKey in achievements) {
            if (!gameState.achievements[achievementKey]) {
                gameState.achievements[achievementKey] = false;
            }
        }

        let startTime = Date.now();

        function updateDisplay() {
            document.getElementById('score').textContent = `${formatNumber(Math.floor(gameState.bananas))} bananas`;
            document.getElementById('clickPower').textContent = formatNumber(Math.floor(gameState.clickPower));
            document.getElementById('bps').textContent = formatNumber(gameState.bananasPerSecond.toFixed(1));
            document.getElementById('upgradesOwned').textContent = formatNumber(gameState.upgradesOwned);
            document.getElementById('totalClicks').textContent = formatNumber(gameState.totalClicks);
            document.getElementById('goldenBananas').textContent = formatNumber(gameState.goldenBananas);
            
            // Update achievement count
            const achievementCount = Object.values(gameState.achievements).filter(Boolean).length;
            document.getElementById('achievementCount').textContent = achievementCount;
            
            // Update prestige button
            const prestigeBtn = document.getElementById('prestigeBtn');
            if (gameState.statistics.totalBananasEarned >= 1000000) {
                prestigeBtn.disabled = false;
                const goldenBananaGain = Math.floor(gameState.statistics.totalBananasEarned / 1000000);
                prestigeBtn.textContent = `‚≠ê Prestige (+${goldenBananaGain} Golden Bananas)`;
            }
            
            // Show multiplier if active
            const multiplierDisplay = document.getElementById('multiplierDisplay');
            if (gameState.multiplierActive && Date.now() < gameState.multiplierEnd) {
                multiplierDisplay.style.display = 'block';
                document.getElementById('multiplierValue').textContent = '2';
            } else {
                multiplierDisplay.style.display = 'none';
                gameState.multiplierActive = false;
            }
        }

        function formatNumber(num) {
            const n = parseFloat(num);
            if (n >= 1e15) return (n / 1e15).toFixed(2) + 'Q';
            if (n >= 1e12) return (n / 1e12).toFixed(2) + 'T';
            if (n >= 1e9) return (n / 1e9).toFixed(2) + 'B';
            if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
            if (n >= 1e3) return (n / 1e3).toFixed(2) + 'K';
            return Math.floor(n).toString();
        }

        function calculateClickPower() {
            let power = 1;
            for (let upgradeKey in gameState.upgrades) {
                const upgrade = gameState.upgrades[upgradeKey];
                const upgradeDef = findUpgradeDefinition(upgradeKey);
                if (upgradeDef && upgradeDef.type === 'click') {
                    power += upgradeDef.effect * upgrade.owned;
                }
            }
            gameState.clickPower = power * gameState.prestigeMultiplier;
        }

        function calculateBPS() {
            let bps = 0;
            for (let upgradeKey in gameState.upgrades) {
                const upgrade = gameState.upgrades[upgradeKey];
                const upgradeDef = findUpgradeDefinition(upgradeKey);
                if (upgradeDef && upgradeDef.type === 'auto') {
                    bps += upgradeDef.effect * upgrade.owned;
                }
            }
            gameState.bananasPerSecond = bps * gameState.prestigeMultiplier;
        }

        function findUpgradeDefinition(upgradeKey) {
            for (let categoryKey in upgradeCategories) {
                if (upgradeCategories[categoryKey].upgrades[upgradeKey]) {
                    return upgradeCategories[categoryKey].upgrades[upgradeKey];
                }
            }
            return null;
        }

        function createClickEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'click-effect';
            const multiplier = gameState.multiplierActive ? 2 : 1;
            effect.textContent = `+${formatNumber(Math.floor(gameState.clickPower * multiplier))}`;
            effect.style.left = (x - 50) + 'px';
            effect.style.top = (y - 20) + 'px';
            document.body.appendChild(effect);
            
            setTimeout(() => {
                if (document.body.contains(effect)) {
                    document.body.removeChild(effect);
                }
            }, 1200);
        }

        function createPurchaseEffect(upgradeName) {
            const effect = document.createElement('div');
            effect.className = 'purchase-effect';
            effect.textContent = `Purchased: ${upgradeName}!`;
            document.body.appendChild(effect);
            
            setTimeout(() => {
                if (document.body.contains(effect)) {
                    document.body.removeChild(effect);
                }
            }, 1000);
        }

        function createAchievementEffect(achievementName) {
            const effect = document.createElement('div');
            effect.className = 'achievement-notification';
            effect.innerHTML = `<strong>üèÜ Achievement Unlocked!</strong><br>${achievementName}`;
            document.body.appendChild(effect);
            
            setTimeout(() => {
                if (document.body.contains(effect)) {
                    document.body.removeChild(effect);
                }
            }, 3000);
        }

        function checkAchievements() {
            for (let achievementKey in achievements) {
                if (!gameState.achievements[achievementKey] && achievements[achievementKey].condition()) {
                    gameState.achievements[achievementKey] = true;
                    createAchievementEffect(achievements[achievementKey].name);
                    
                    // Award golden banana for achievement
                    gameState.goldenBananas++;
                }
            }
        }

        function buyUpgrade(upgradeKey) {
            const upgrade = gameState.upgrades[upgradeKey];
            const upgradeDef = findUpgradeDefinition(upgradeKey);
            
            if (gameState.bananas >= upgrade.cost && upgradeDef) {
                gameState.bananas -= upgrade.cost;
                gameState.statistics.totalMoneySpent += upgrade.cost;
                upgrade.owned++;
                gameState.upgradesOwned++;
                upgrade.cost = Math.floor(upgrade.cost * 1.15);
                
                calculateClickPower();
                calculateBPS();
                updateDisplay();
                renderUpgrades();
                checkAchievements();
                
                createPurchaseEffect(upgradeDef.name);
                
                // Add purchase animation to upgrade item
                const upgradeElement = document.querySelector(`[data-upgrade="${upgradeKey}"]`);
                if (upgradeElement) {
                    upgradeElement.classList.add('purchased');
                    setTimeout(() => {
                        upgradeElement.classList.remove('purchased');
                    }, 500);
                }
            }
        }

        function prestige() {
            if (gameState.statistics.totalBananasEarned >= 1000000) {
                const goldenBananaGain = Math.floor(gameState.statistics.totalBananasEarned / 1000000);
                
                // Reset game state but keep golden bananas and achievements
                const previousGoldenBananas = gameState.goldenBananas;
                const previousAchievements = { ...gameState.achievements };
                const previousStats = { ...gameState.statistics };
                
                // Reset upgrades
                for (let categoryKey in upgradeCategories) {
                    for (let upgradeKey in upgradeCategories[categoryKey].upgrades) {
                        gameState.upgrades[upgradeKey] = { 
                            owned: 0, 
                            cost: upgradeCategories[categoryKey].upgrades[upgradeKey].cost 
                        };
                    }
                }
                
                gameState.bananas = 0;
                gameState.clickPower = 1;
                gameState.bananasPerSecond = 0;
                gameState.totalClicks = 0;
                gameState.upgradesOwned = 0;
                gameState.goldenBananas = previousGoldenBananas + goldenBananaGain;
                gameState.achievements = previousAchievements;
                gameState.statistics = previousStats;
                gameState.statistics.prestigeCount++;
                gameState.statistics.totalBananasEarned = 0;
                gameState.statistics.totalMoneySpent = 0;
                
                // Calculate new prestige multiplier
                gameState.prestigeMultiplier = 1 + (gameState.goldenBananas * 0.1);
                
                calculateClickPower();
                calculateBPS();
                updateDisplay();
                
                createPurchaseEffect(`Prestige! +${goldenBananaGain} Golden Bananas`);
            }
        }

        function renderUpgrades() {
            const shopContent = document.getElementById('shopContent');
            shopContent.innerHTML = '';
            
            for (let categoryKey in upgradeCategories) {
                const category = upgradeCategories[categoryKey];
                
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'upgrade-category';
                
                const categoryHeader = document.createElement('div');
                categoryHeader.className = 'category-header';
                categoryHeader.textContent = category.name;
                categoryDiv.appendChild(categoryHeader);
                
                for (let upgradeKey in category.upgrades) {
                    const upgrade = gameState.upgrades[upgradeKey];
                    const upgradeDef = category.upgrades[upgradeKey];
                    
                    const upgradeDiv = document.createElement('div');
                    upgradeDiv.className = 'upgrade-item';
                    upgradeDiv.setAttribute('data-upgrade', upgradeKey);
                    
                    const canAfford = gameState.bananas >= upgrade.cost;
                    if (canAfford) {
                        upgradeDiv.classList.add('affordable');
                    }
                    
                    const upgradeContent = document.createElement('div');
                    upgradeContent.className = 'upgrade-content';
                    
                    const upgradeInfo = document.createElement('div');
                    upgradeInfo.className = 'upgrade-info';
                    
                    const upgradeName = document.createElement('div');
                    upgradeName.className = 'upgrade-name';
                    upgradeName.textContent = upgradeDef.name;
                    
                    const upgradeDescription = document.createElement('div');
                    upgradeDescription.className = 'upgrade-description';
                    upgradeDescription.textContent = upgradeDef.desc;
                    
                    const upgradeStats = document.createElement('div');
                    upgradeStats.className = 'upgrade-stats';
                    
                    const upgradeCost = document.createElement('span');
                    upgradeCost.className = 'upgrade-cost';
                    upgradeCost.textContent = `Cost: ${formatNumber(upgrade.cost)}`;
                    
                    const upgradeOwned = document.createElement('span');
                    upgradeOwned.className = 'upgrade-owned';
                    upgradeOwned.textContent = `Owned: ${upgrade.owned}`;
                    
                    const effectText = document.createElement('span');
                    effectText.className = 'upgrade-effect';
                    if (upgradeDef.type === 'click') {
                        effectText.textContent = `+${formatNumber(upgradeDef.effect * gameState.prestigeMultiplier)} per click`;
                    } else {
                        effectText.textContent = `+${formatNumber(upgradeDef.effect * gameState.prestigeMultiplier)}/sec`;
                    }
                    
                    upgradeStats.appendChild(upgradeCost);
                    upgradeStats.appendChild(upgradeOwned);
                    upgradeStats.appendChild(effectText);
                    
                    upgradeInfo.appendChild(upgradeName);
                    upgradeInfo.appendChild(upgradeDescription);
                    upgradeInfo.appendChild(upgradeStats);
                    
                    const buyButton = document.createElement('button');
                    buyButton.className = 'buy-button';
                    buyButton.textContent = 'BUY';
                    buyButton.disabled = !canAfford;
                    
                    buyButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        buyUpgrade(upgradeKey);
                    });
                    
                    upgradeContent.appendChild(upgradeInfo);
                    upgradeContent.appendChild(buyButton);
                    upgradeDiv.appendChild(upgradeContent);
                    
                    categoryDiv.appendChild(upgradeDiv);
                }
                
                shopContent.appendChild(categoryDiv);
            }
        }

        function activateGoldenBanana() {
            if (Math.random() < 0.001 && !gameState.multiplierActive) { // 0.1% chance per click
                gameState.multiplierActive = true;
                gameState.multiplierEnd = Date.now() + 30000; // 30 seconds
                createPurchaseEffect('Golden Banana! 2x multiplier for 30 seconds!');
            }
        }

        // Save game state
        function saveGame() {
            gameState.statistics.timePlayed += Date.now() - startTime;
            startTime = Date.now();
            
            try {
                const saveData = JSON.stringify(gameState);
                localStorage.setItem('bananaFactoryEmpire', saveData);
                console.log('Game saved successfully');
            } catch (e) {
                console.error('Failed to save game:', e);
            }
        }

        // Load game state
        function loadGame() {
            try {
                const saved = localStorage.getItem('bananaFactoryEmpire');
                if (saved) {
                    const loadedState = JSON.parse(saved);
                    
                    // Merge loaded state with defaults to handle new features
                    gameState = {
                        ...gameState,
                        ...loadedState,
                        statistics: { ...gameState.statistics, ...(loadedState.statistics || {}) },
                        achievements: { ...gameState.achievements, ...(loadedState.achievements || {}) }
                    };
                    
                    // Ensure all upgrades exist
                    for (let categoryKey in upgradeCategories) {
                        for (let upgradeKey in upgradeCategories[categoryKey].upgrades) {
                            if (!gameState.upgrades[upgradeKey]) {
                                gameState.upgrades[upgradeKey] = { 
                                    owned: 0, 
                                    cost: upgradeCategories[categoryKey].upgrades[upgradeKey].cost 
                                };
                            }
                        }
                    }
                    
                    // Ensure all achievements exist
                    for (let achievementKey in achievements) {
                        if (gameState.achievements[achievementKey] === undefined) {
                            gameState.achievements[achievementKey] = false;
                        }
                    }
                    
                    console.log('Game loaded successfully');
                }
            } catch (e) {
                console.error('Failed to load game:', e);
            }
        }

        function exportSave() {
            const saveData = JSON.stringify(gameState);
            const blob = new Blob([saveData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'banana-factory-save.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            createPurchaseEffect('Save exported!');
        }

        function importSave() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const loadedState = JSON.parse(e.target.result);
                        gameState = { ...gameState, ...loadedState };
                        
                        calculateClickPower();
                        calculateBPS();
                        updateDisplay();
                        createPurchaseEffect('Save imported!');
                    } catch (err) {
                        alert('Invalid save file!');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        function resetGame() {
            if (confirm('Are you sure you want to reset your game? This cannot be undone!')) {
                localStorage.removeItem('bananaFactoryEmpire');
                location.reload();
            }
        }

        // Event Listeners
        document.getElementById('shopBtn').addEventListener('click', () => {
            document.getElementById('shopOverlay').classList.add('active');
            renderUpgrades();
        });

        document.getElementById('closeShop').addEventListener('click', () => {
            document.getElementById('shopOverlay').classList.remove('active');
        });

        document.getElementById('shopOverlay').addEventListener('click', (e) => {
            if (e.target === document.getElementById('shopOverlay')) {
                document.getElementById('shopOverlay').classList.remove('active');
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.getElementById('shopOverlay').classList.remove('active');
            }
        });

        document.getElementById('prestigeBtn').addEventListener('click', prestige);
        document.getElementById('saveBtn').addEventListener('click', exportSave);
        document.getElementById('loadBtn').addEventListener('click', importSave);
        document.getElementById('resetBtn').addEventListener('click', resetGame);

        // Main banana button click event
        document.getElementById('bananaBtn').addEventListener('click', (e) => {
            const multiplier = gameState.multiplierActive ? 2 : 1;
            const earnedBananas = gameState.clickPower * multiplier;
            
            gameState.bananas += earnedBananas;
            gameState.totalClicks++;
            gameState.statistics.totalBananasEarned += earnedBananas;
            
            updateDisplay();
            checkAchievements();
            activateGoldenBanana();
            
            const rect = e.target.getBoundingClientRect();
            const x = e.clientX;
            const y = e.clientY;
            createClickEffect(x, y);
        });

        // Auto-production loop
        setInterval(() => {
            if (gameState.bananasPerSecond > 0) {
                const multiplier = gameState.multiplierActive ? 2 : 1;
                const earnedBananas = (gameState.bananasPerSecond * multiplier) / 10;
                gameState.bananas += earnedBananas;
                gameState.statistics.totalBananasEarned += earnedBananas;
                updateDisplay();
            }
        }, 100);

        // Auto-save every 10 seconds
        setInterval(saveGame, 10000);

        // Achievement check every 5 seconds
        setInterval(checkAchievements, 5000);

        // Save when page is closed
        window.addEventListener('beforeunload', saveGame);

        // Initial setup
        loadGame();
        calculateClickPower();
        calculateBPS();
        updateDisplay();

        // Floating bananas animation
        function createFloatingBanana() {
            const banana = document.createElement('div');
            banana.textContent = 'üçå';
            banana.style.position = 'fixed';
            banana.style.fontSize = Math.random() * 20 + 10 + 'px';
            banana.style.left = Math.random() * window.innerWidth + 'px';
            banana.style.top = window.innerHeight + 'px';
            banana.style.opacity = '0.3';
            banana.style.pointerEvents = 'none';
            banana.style.zIndex = '1';
            banana.style.transition = 'all ' + (Math.random() * 10 + 15) + 's linear';
            
            document.body.appendChild(banana);
            
            setTimeout(() => {
                banana.style.top = '-100px';
                banana.style.transform = `rotate(${Math.random() * 360}deg)`;
            }, 100);
            
            setTimeout(() => {
                if (document.body.contains(banana)) {
                    document.body.removeChild(banana);
                }
            }, 25000);
        }

        // Create floating bananas periodically
        setInterval(createFloatingBanana, 3000);

        // Random golden banana spawner
        function spawnGoldenBanana() {
            if (Math.random() < 0.01) { // 1% chance every 30 seconds
                const goldenBanana = document.createElement('div');
                goldenBanana.textContent = 'üåüüçå';
                goldenBanana.style.position = 'fixed';
                goldenBanana.style.fontSize = '3em';
                goldenBanana.style.left = Math.random() * (window.innerWidth - 100) + 'px';
                goldenBanana.style.top = Math.random() * (window.innerHeight - 100) + 'px';
                goldenBanana.style.cursor = 'pointer';
                goldenBanana.style.zIndex = '10000';
                goldenBanana.style.animation = 'pulse 1s infinite';
                goldenBanana.style.textShadow = '0 0 20px gold';
                goldenBanana.title = 'Click for bonus bananas!';
                
                goldenBanana.addEventListener('click', () => {
                    const bonus = Math.floor(gameState.bananasPerSecond * 60); // 1 minute worth
                    gameState.bananas += bonus;
                    gameState.statistics.totalBananasEarned += bonus;
                    createPurchaseEffect(`Golden Bonus: +${formatNumber(bonus)} bananas!`);
                    document.body.removeChild(goldenBanana);
                });
                
                document.body.appendChild(goldenBanana);
                
                // Remove after 10 seconds if not clicked
                setTimeout(() => {
                    if (document.body.contains(goldenBanana)) {
                        document.body.removeChild(goldenBanana);
                    }
                }, 10000);
            }
        }

        // Spawn golden bananas every 30 seconds
        setInterval(spawnGoldenBanana, 30000);

        // Add some CSS animations for golden bananas
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);

        console.log('üçå Banana Factory Empire Enhanced - Loaded successfully!');
        console.log('Features: Enhanced save system, achievements, prestige, golden bananas, more upgrades!');

    </script>
</body>
</html>